function checkForUnveil(){for(var e=window.scrollY,t=e+window.innerHeight,r=document.querySelectorAll("main img"),n=0;n<r.length;n++){var a=r[n],o=a.getBoundingClientRect().top,i=o+a.offsetHeight;if(i>=e-200&&t+200>=o){var s=document.createEvent("HTMLEvents");s.initEvent("unveil",!0,!1),a.dispatchEvent(s)}}}function onImageLoad(e){var t=e.currentTarget,r=new Image;r.src=t.getAttribute("data-src-second");var n=t.parentNode.querySelector(".Portrait-loader");t.parentNode.querySelector(".Portrait-mask").removeChild(n),t.removeEventListener("load",onImageLoad)}function unveil(e){var t=e.target||e.toElement;t.setAttribute("src",t.getAttribute("data-src")),t.addEventListener("load",onImageLoad),t.removeEventListener("unveil",unveil)}function valse(e){var t=e.target||e.toElement;if("Portrait-mask"==t.className){var r=t.parentNode.querySelector("img"),n="mousedown"===e.type||"touchstart"===e.type,a=r.getAttribute(n?"data-src-second":"data-src");"ontouchstart"in window&&"touchstart"===e.type?valseTimer=setTimeout(function(){r.setAttribute("src",a)},100):r.setAttribute("src",a)}}function cancelValse(){window.clearTimeout(valseTimer)}for(var mainElement=document.querySelector("main"),portraits=[{id:1,source:"Robin-back.jpg",secondSource:"Robin-front.jpg"},{id:2,source:"Ingrid-back.jpg",secondSource:"Ingrid-front.jpg"}],template=document.querySelector(".Portrait.is-template"),i=0;i<portraits.length;i++){var personne=portraits[i],portraitElement=template.cloneNode(!0);portraitElement.className="Portrait";var idElement=portraitElement.querySelector(".Portrait-id");idElement.textContent="#"+("00"+personne.id).substr(-3);var mask=portraitElement.querySelector(".Portrait-mask");mask.appendChild(idElement);var portrait=portraitElement.querySelector("img");portrait.setAttribute("data-src","images/"+personne.source),portrait.setAttribute("data-src-second","images/"+personne.secondSource),portrait.addEventListener("unveil",unveil),mainElement.appendChild(portraitElement)}if(checkForUnveil(),"ontouchstart"in window){mainElement.addEventListener("touchstart",valse),mainElement.addEventListener("touchleave",valse),mainElement.addEventListener("touchend",valse);var valseTimer;mainElement.addEventListener("touchmove",cancelValse)}else mainElement.addEventListener("mousedown",valse),mainElement.addEventListener("mouseleave",valse),mainElement.addEventListener("mouseup",valse);window.onscroll=checkForUnveil,window.onresize=checkForUnveil;
//# sourceMappingURL=maps/main.js.map