function checkForUnveil(){for(var e=(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0),t=e+window.innerHeight,n=document.querySelectorAll("main img"),r=0;r<n.length;r++){var a=n[r],o=a.getBoundingClientRect().top,i=o+a.offsetHeight;if(i>=e-200&&t+200>=o){var l=document.createEvent("HTMLEvents");l.initEvent("unveil",!0,!1),a.dispatchEvent(l)}}}function onImageLoad(e){var t=e.currentTarget,n=new Image;n.src=t.getAttribute("data-src-second");var r=t.parentNode.querySelector(".Portrait-loader");t.parentNode.querySelector(".Portrait-mask").removeChild(r),t.removeEventListener("load",onImageLoad)}function unveil(e){var t=e.target||e.toElement;t.setAttribute("src",t.getAttribute("data-src")),t.addEventListener("load",onImageLoad),t.removeEventListener("unveil",unveil)}function valse(e){var t=e.target||e.toElement;if("Portrait-mask"==t.className){var n=t.parentNode.querySelector("img"),r="mousedown"===e.type||"touchstart"===e.type,a=n.getAttribute(r?"data-src-second":"data-src");"ontouchstart"in window&&"touchstart"===e.type?valseTimer=setTimeout(function(){n.setAttribute("src",a)},100):n.setAttribute("src",a)}}function cancelValse(e){window.clearTimeout(valseTimer)}function tutorialDisplay(e){var t=e.target||e.toElement;t.addEventListener("load",function(){var e=window.navigator.userLanguage||window.navigator.language,t=document.querySelector(".Tutorial .Tooltip");t.style.display="inline-block",t.appendChild("fr"==e?document.createTextNode("Restez cliqu√© pour valser !"):document.createTextNode("Stay clicked to valse !"))})}for(var mainElement=document.querySelector("main"),portraits=[{id:3,source:"Edern-back.jpg",secondSource:"Edern-front.jpg"},{id:2,source:"Ingrid-back.jpg",secondSource:"Ingrid-front.jpg"},{id:1,source:"Robin-back.jpg",secondSource:"Robin-front.jpg"}],template=document.querySelector(".Portrait.is-template"),i=0;i<portraits.length;i++){var personne=portraits[i],portraitElement=template.cloneNode(!0);portraitElement.className="Portrait";var idElement=portraitElement.querySelector(".Portrait-id");idElement.textContent="#"+("00"+personne.id).substr(-3);var mask=portraitElement.querySelector(".Portrait-mask");mask.appendChild(idElement),mask.addEventListener("mouseleave",valse);var portrait=portraitElement.querySelector("img");portrait.setAttribute("data-src","images/"+personne.source),portrait.setAttribute("data-src-second","images/"+personne.secondSource),portrait.addEventListener("unveil",unveil),0===i&&portrait.addEventListener("unveil",tutorialDisplay),mainElement.appendChild(portraitElement)}if(checkForUnveil(),"ontouchstart"in window){mainElement.addEventListener("touchstart",valse),mainElement.addEventListener("touchleave",valse),mainElement.addEventListener("touchend",valse);var valseTimer;mainElement.addEventListener("touchmove",cancelValse)}else mainElement.addEventListener("mousedown",valse),mainElement.addEventListener("mouseup",valse);window.onscroll=checkForUnveil,window.onresize=checkForUnveil;
//# sourceMappingURL=maps/main.js.map