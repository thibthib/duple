function checkForUnveil(){for(var e=(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0),t=e+window.innerHeight,r=document.querySelectorAll("main img"),n=0;n<r.length;n++){var o=r[n],a=o.getBoundingClientRect().top,i=a+o.offsetHeight;if(i>=e-200&&t+200>=a){var l=document.createEvent("HTMLEvents");l.initEvent("unveil",!0,!1),o.dispatchEvent(l)}}}function onImageLoad(e){var t=e.currentTarget,r=new Image;r.src=t.getAttribute("data-src-second");var n=t.parentNode.querySelector(".Portrait-loader");t.parentNode.querySelector(".Portrait-mask").removeChild(n),t.removeEventListener("load",onImageLoad)}function unveil(e){var t=e.target||e.toElement;t.setAttribute("src",t.getAttribute("data-src")),t.addEventListener("load",onImageLoad),t.removeEventListener("unveil",unveil)}function valse(e){var t=e.target||e.toElement;if("Portrait-mask"==t.className){var r=t.parentNode.querySelector("img"),n="mousedown"===e.type||"touchstart"===e.type,o=r.getAttribute(n?"data-src-second":"data-src");"ontouchstart"in window&&"touchstart"===e.type?valseTimer=setTimeout(function(){r.setAttribute("src",o)},100):r.setAttribute("src",o),hideTutorial()}}function cancelValse(e){window.clearTimeout(valseTimer)}function checkForTutorial(e){portrait.removeEventListener("unveil",displayTutorial);var t="true"==document.cookie.replace(/(?:(?:^|.*;\s*)hideTutorial\s*\=\s*([^;]*).*$)|^.*$/,"$1");if(!t){var r=e.target||e.toElement;r.addEventListener("load",function(e){e.target.removeEventListener(e.type,arguments.callee),displayTutorial()})}}function displayTutorial(){var e=window.navigator.userLanguage||window.navigator.language,t=document.querySelector(".Tutorial .Tooltip");t.style.display="inline-block",t.innerHTML="fr"==e?"Appuie pour valser !":"Press to valse !"}function hideTutorial(){var e=document.querySelector(".Tutorial .Tooltip");e.style.display="none",document.cookie="hideTutorial=true; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/"}for(var mainElement=document.querySelector("main"),portraits=[{id:5,source:"Fanny-back.jpg",secondSource:"Fanny-front.jpg"},{id:4,source:"Laurent-back.jpg",secondSource:"Laurent-front.jpg"},{id:3,source:"Edern-back.jpg",secondSource:"Edern-front.jpg"},{id:2,source:"Ingrid-back.jpg",secondSource:"Ingrid-front.jpg"},{id:1,source:"Robin-back.jpg",secondSource:"Robin-front.jpg"}],template=document.querySelector(".Portrait.is-template"),i=0;i<portraits.length;i++){var personne=portraits[i],portraitElement=template.cloneNode(!0);portraitElement.className="Portrait";var idElement=portraitElement.querySelector(".Portrait-id");idElement.textContent="#"+("00"+personne.id).substr(-3);var mask=portraitElement.querySelector(".Portrait-mask");mask.appendChild(idElement),mask.addEventListener("mouseleave",valse);var portrait=portraitElement.querySelector("img");portrait.setAttribute("data-src","images/"+personne.source),portrait.setAttribute("data-src-second","images/"+personne.secondSource),portrait.addEventListener("unveil",unveil),0===i&&portrait.addEventListener("unveil",checkForTutorial),mainElement.appendChild(portraitElement)}if(checkForUnveil(),"ontouchstart"in window){mainElement.addEventListener("touchstart",valse),mainElement.addEventListener("touchleave",valse),mainElement.addEventListener("touchend",valse);var valseTimer;mainElement.addEventListener("touchmove",cancelValse)}else mainElement.addEventListener("mousedown",valse),mainElement.addEventListener("mouseup",valse);window.onscroll=checkForUnveil,window.onresize=checkForUnveil;
//# sourceMappingURL=maps/main.js.map