function checkForUnveil(){for(var e=window.scrollY,t=e+window.innerHeight,n=document.querySelectorAll("main img"),i=0;i<n.length;i++){var r=n[i],a=r.getBoundingClientRect().top,o=a+r.offsetHeight;if(o>=e-200&&t+200>=a){var l=document.createEvent("HTMLEvents");l.initEvent("unveil",!0,!1),r.dispatchEvent(l)}}}function unveil(e){var t=e.target||e.toElement;t.onload=function(e){var n=new Image;n.src=e.currentTarget.getAttribute("data-src-second");var i=t.parentNode.querySelector(".loader");t.parentNode.querySelector(".imageMask").removeChild(i)},t.setAttribute("src",t.getAttribute("data-src")),t.removeEventListener("unveil",unveil)}function valse(e){var t=e.target||e.toElement,n=t.parentNode.querySelector("img"),i="mousedown"===e.type||"touchstart"===e.type,r=n.getAttribute(i?"data-src-second":"data-src");"ontouchstart"in window&&"touchstart"===e.type?valseTimer=setTimeout(function(){n.setAttribute("src",r)},100):n.setAttribute("src",r)}function cancelValse(){window.clearTimeout(valseTimer)}for(var mainElement=document.querySelector("main"),loader=document.querySelector(".loader"),i=0;i<mainElement.children.length;i++){var mask=mainElement.children[i].querySelector(".imageMask"),image=mainElement.children[i].querySelector("img");mask.appendChild(loader.cloneNode(!0)),image.addEventListener("unveil",unveil)}if(mainElement.addEventListener("unveil",unveil),"ontouchstart"in window){mainElement.addEventListener("touchstart",valse),mainElement.addEventListener("touchleave",valse),mainElement.addEventListener("touchend",valse);var valseTimer;mainElement.addEventListener("touchmove",cancelValse)}else mainElement.addEventListener("mousedown",valse),mainElement.addEventListener("mouseleave",valse),mainElement.addEventListener("mouseup",valse);window.onscroll=checkForUnveil,window.onresize=checkForUnveil,checkForUnveil();
//# sourceMappingURL=maps/main.js.map